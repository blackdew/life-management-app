# 📊 시각화 대시보드 PRD (Product Requirements Document)

## 📌 문서 정보
- **작성일**: 2025-10-16
- **버전**: v1.0
- **작성자**: Claude Code
- **상태**: 기획

---

## 🎯 1. 개요 (Overview)

### 1.1 목적
사용자가 자신의 일상, 성장, 여정 진행을 **데이터 기반으로 시각적으로 인지**하고, 패턴을 발견하여 더 나은 의사결정을 할 수 있도록 돕는 인사이트 대시보드를 제공한다.

### 1.2 배경
- 현재 시스템은 일일 할일 관리와 회고 기능을 제공하지만, **시계열 변화**나 **패턴 분석**은 부족
- 사용자는 "내가 어떻게 변화하고 있는지", "어떤 요일에 생산적인지" 등의 통찰을 얻기 어려움
- 여정 진행률이 숫자로만 표시되어 **직관적 이해**가 부족

### 1.3 목표
- ✅ 하루의 상태 변화를 **시계열 그래프**로 트래킹
- ✅ 여정 진행을 **진행 바와 타임라인**으로 명확히 시각화
- ✅ 자신의 패턴(요일별, 시간대별)을 **히트맵**으로 인지
- ✅ 주간/월간 비교를 통해 **성장 추세** 파악

---

## 👤 2. 사용자 스토리 (User Stories)

### 2.1 기본 사용자 스토리

| ID | 사용자 스토리 | 우선순위 |
|----|-------------|---------|
| US-1 | 사용자로서, 나는 **최근 30일간 완료율 추세**를 라인 차트로 보고 싶다. | P0 (필수) |
| US-2 | 사용자로서, 나는 **만족도와 에너지 레벨의 변화**를 한 차트에서 비교하고 싶다. | P0 (필수) |
| US-3 | 사용자로서, 나는 **진행 중인 여정들의 진행률**을 한눈에 보고 싶다. | P0 (필수) |
| US-4 | 사용자로서, 나는 **어느 요일에 가장 생산적인지** 히트맵으로 확인하고 싶다. | P1 (중요) |
| US-5 | 사용자로서, 나는 **이번 주와 지난 주를 비교**하여 성장을 확인하고 싶다. | P1 (중요) |
| US-6 | 사용자로서, 나는 **카테고리별 시간 투자 비율**을 도넛 차트로 보고 싶다. | P2 (선택) |

### 2.2 상세 시나리오

#### 시나리오 1: 완료율 추세 확인
> **상황**: 사용자가 최근 한 달 동안 자신의 생산성이 어떻게 변화했는지 궁금하다.
>
> **액션**: 대시보드 페이지 접속 → 완료율 트렌드 차트 확인
>
> **결과**:
> - 30일간 완료율 라인 차트 표시
> - 평균선 표시 (예: 평균 72%)
> - 추세 메시지 표시 (예: "지난 주 대비 +8% 향상")

#### 시나리오 2: 여정 진행 상황 점검
> **상황**: 사용자가 "건강한 루틴 만들기" 여정이 얼마나 진행되었는지 확인하고 싶다.
>
> **액션**: 대시보드 → 여정 진행 섹션 확인
>
> **결과**:
> - 여정별 프로그레스 바 표시 (예: 75%)
> - 완료/전체 할일 개수 (예: 15/20)
> - 남은 기간 표시 (예: D-5)

---

## 🛠️ 3. 기능 요구사항 (Functional Requirements)

### 3.1 대시보드 페이지 (`/insights`)

#### 3.1.1 완료율 트렌드 차트
- **차트 타입**: Line Chart
- **데이터 소스**: `DailyReflection` 테이블의 `completion_rate`
- **X축**: 날짜 (최근 7/30/90일)
- **Y축**: 완료율 (0-100%)
- **기능**:
  - 날짜 범위 선택 (7일/30일/90일)
  - 평균선 표시
  - 툴팁: 날짜, 완료율, 완료 개수
- **API**: `GET /api/insights/completion-trend?days=30`

#### 3.1.2 만족도 & 에너지 트렌드 차트
- **차트 타입**: Dual Line Chart (2개 라인)
- **데이터 소스**: `DailyReflection.satisfaction_score`, `DailyReflection.energy_level`
- **X축**: 날짜
- **Y축**: 점수 (1-5점)
- **기능**:
  - 만족도: 노란색 라인
  - 에너지: 파란색 라인
  - 상관관계 인사이트 표시
- **API**: `GET /api/insights/satisfaction-energy-trend?days=30`

#### 3.1.3 여정 진행 카드
- **UI 구성**:
  - 여정 제목
  - 프로그레스 바 (실제 진행률)
  - 완료/전체 할일 개수
  - 남은 기간 (D-day)
  - 상태 뱃지 (진행중/완료/일시중지)
- **데이터 소스**: `Journey` + `DailyTodo`, `Todo` 테이블
- **정렬**: 진행 중인 여정 우선, 종료일 가까운 순
- **API**: `GET /api/insights/journey-progress`

#### 3.1.4 요일별 완료율 히트맵
- **차트 타입**: Heatmap (Matrix)
- **데이터 소스**: 최근 4주간의 요일별 완료율 집계
- **레이아웃**: 월화수목금토일 (7개 컬럼)
- **색상**: 완료율에 따라 그라데이션 (낮음: 연한 회색 → 높음: 진한 초록)
- **툴팁**: 요일, 완료율, 평균 완료 개수
- **API**: `GET /api/insights/weekday-pattern?weeks=4`

#### 3.1.5 카테고리별 시간 투자 도넛 차트
- **차트 타입**: Doughnut Chart
- **데이터 소스**: 최근 30일간 카테고리별 완료한 할일 개수 또는 소요시간
- **카테고리**: 업무, 학습, 건강, 개인, 관계, 기타
- **기능**:
  - 각 카테고리 비율 (%)
  - 클릭 시 해당 카테고리 할일 목록 표시
- **API**: `GET /api/insights/category-distribution?days=30`

#### 3.1.6 주간 비교 카드
- **UI 구성**:
  - 이번 주 통계 (완료율, 만족도, 완료 개수)
  - 지난 주 통계
  - 변화량 (예: +12% ↑, -3% ↓)
  - 인사이트 메시지 (예: "완료율이 지난 주보다 12% 향상되었어요!")
- **데이터 소스**: `DailyReflection`, `DailyTodo`
- **API**: `GET /api/insights/weekly-comparison`

### 3.2 API 엔드포인트

| 엔드포인트 | 메서드 | 파라미터 | 응답 |
|----------|-------|---------|-----|
| `/api/insights/completion-trend` | GET | `days` (7/30/90) | `{ dates: [], rates: [], avg: 72.5 }` |
| `/api/insights/satisfaction-energy-trend` | GET | `days` (7/30/90) | `{ dates: [], satisfaction: [], energy: [] }` |
| `/api/insights/journey-progress` | GET | - | `[{ id, title, progress, completed, total, daysLeft }]` |
| `/api/insights/weekday-pattern` | GET | `weeks` (4) | `{ weekdays: [월~일], rates: [[...], [...]] }` |
| `/api/insights/category-distribution` | GET | `days` (30) | `{ categories: [], counts: [], percentages: [] }` |
| `/api/insights/weekly-comparison` | GET | - | `{ thisWeek: {...}, lastWeek: {...}, change: {...} }` |

---

## 🎨 4. UI/UX 디자인 가이드

### 4.1 레이아웃
- **헤더**: "📊 나의 성장 인사이트" + 날짜 범위 선택 드롭다운
- **그리드**: 2열 레이아웃 (데스크탑), 1열 (모바일)
- **반응형**:
  - 모바일: 차트 세로 스택
  - 태블릿: 2열 그리드
  - 데스크탑: 3열 그리드

### 4.2 색상 팔레트
- **완료율**: 초록색 계열 (#10B981)
- **만족도**: 노란색 계열 (#FBBF24)
- **에너지**: 파란색 계열 (#3B82F6)
- **여정**: 보라색 계열 (#8B5CF6)
- **배경**: 흰색 (#FFFFFF) / 연한 회색 (#F9FAFB)

### 4.3 인터랙션
- **차트 호버**: 툴팁 표시 (날짜, 수치)
- **차트 클릭**: 해당 날짜 상세보기 (회고 페이지 이동)
- **날짜 범위 변경**: 차트 애니메이션 전환
- **로딩 상태**: 스켈레톤 UI 표시

### 4.4 인사이트 메시지
- **긍정적 변화**: "🎉 이번 주 완료율이 지난 주보다 12% 향상되었어요!"
- **패턴 발견**: "💡 수요일이 가장 생산적이에요!"
- **격려**: "💪 꾸준히 성장하고 있어요. 이번 달 평균 완료율 78%!"

---

## ⚡ 5. 비기능 요구사항 (Non-Functional Requirements)

### 5.1 성능
- **페이지 로드 시간**: 2초 이내
- **차트 렌더링**: 500ms 이내
- **API 응답 시간**: 300ms 이내
- **최적화**:
  - DB 쿼리 인덱스 활용
  - 집계 데이터 캐싱 (선택적)

### 5.2 접근성 (Accessibility)
- **키보드 네비게이션**: Tab 키로 차트 간 이동
- **색맹 대응**: 색상뿐 아니라 패턴/텍스트로도 정보 전달
- **스크린 리더**: ARIA 레이블 추가

### 5.3 호환성
- **브라우저**: Chrome 90+, Safari 14+, Firefox 88+
- **디바이스**: 데스크탑, 태블릿, 모바일

### 5.4 보안
- **인증**: 로그인한 사용자만 접근 (추후 확장)
- **데이터 무결성**: 유효하지 않은 날짜 범위 차단

---

## 📊 6. 성공 지표 (Success Metrics)

### 6.1 정량적 지표
- **사용률**: 주 1회 이상 대시보드 접속 사용자 비율 > 60%
- **체류 시간**: 대시보드 페이지 평균 체류 시간 > 2분
- **인게이지먼트**: 차트 인터랙션(호버, 클릭) 횟수 > 5회/방문

### 6.2 정성적 지표
- 사용자 피드백: "내 변화를 한눈에 볼 수 있어서 좋다"
- 패턴 인지: 사용자가 자신의 생산성 패턴을 인지하고 행동 개선

---

## 🚀 7. 출시 단계 (Release Phases)

### Phase 1: MVP (최소 기능 제품)
- ✅ 완료율 트렌드 차트
- ✅ 여정 진행 카드
- ✅ 주간 비교 카드

### Phase 2: 패턴 분석 추가
- ✅ 만족도/에너지 트렌드
- ✅ 요일별 히트맵

### Phase 3: 고급 분석
- ✅ 카테고리별 도넛 차트
- ✅ 시간대별 활동 패턴

### Phase 4: 인사이트 자동화
- ✅ AI 기반 인사이트 메시지
- ✅ 목표 설정 및 알림

---

## 📝 8. 기술 스택

### 8.1 백엔드
- **언어**: Python 3.11
- **프레임워크**: FastAPI
- **데이터베이스**: SQLite
- **ORM**: SQLAlchemy

### 8.2 프론트엔드
- **템플릿 엔진**: Jinja2
- **차트 라이브러리**: Chart.js (v4.x)
- **CSS 프레임워크**: Tailwind CSS
- **인터랙션**: HTMX (부분 업데이트)

### 8.3 기타
- **타입 체킹**: mypy
- **코드 포맷팅**: black, isort

---

## 🔗 9. 관련 문서
- [TODO.md](./TODO.md) - 구현 작업 목록
- [CLAUDE.md](../../CLAUDE.md) - 개발 가이드라인
- [API.md](../API.md) - API 문서

---

## 📅 10. 변경 이력
| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| v1.0 | 2025-10-16 | 초안 작성 | Claude Code |

---

**문서 승인**: 미승인
**다음 단계**: TODO.md 작성 → 개발 착수
